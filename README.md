# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Паттерн

Сайт использует паттерн MVP (Model View Presenter)

Слой Model отвечает за обработку логики и данных сайта - здесь происходит формирование каталога товаров,полученных с сервера с помощью API, валидация форм и формирование корзины

Слой View отвечает за обработку элементов UI с которыми взаимодействует пользователь

Слой Prersenter отвечает за обработку данных введенных пользователем отправку/получение данных из Модели и обновление элементов View

## Компоненты моделей данных

Отвечает за получение и отправку данных о товарах, заказах и формах

### Класс Catalog: IShopItem[] - массив товаров, полученный с сервера

Методы класса:

setItems(items: IShopItem[]):void; - сохрание массива товара в модели после получения из api\
getItem(id: string): IShopItem; - получение массива товаров каталога

### Класс BasketModel - массив товаров в корзине

Поля класса - массив товаров с названиями и количеством товара в корзине

Методы класса:

add (id: string): void; - добавление товара в корзину\
remove (id: string): void; - удаление товара из корзины\
clearBasket(): void - очищает корзину\
 getTotal(): void - высчитывает стоимость товаров в корзине

### Класс OrderForm

Отвечает за валидацию данных введенных в форму, хранение данных заказа

Поля:

payment: 'online'| 'onDelivery' - выбранный способ оплаты\
deliveryAdress: - адрес доставки\
mail: string - почта\
phone: string - телефон\
valid: boolean - определяет валидность поля\
errors: string[] - массив текста для ошибок


## Компоненты Представления

### Класс Page

Отвечает за отображение страницы

Поля класса:

_сounter: HTMLElement- счетчик товаров в корзине\
_catalog: HTMLElement - коллекция всех товаров на странице\
_wrapper: HTMLElement - "обертка" страницы\
_basket: HTMLElement - кнопка корзины

Методы класса:

### Класс Component

Отвечает за базовый функционал элементов разметки: изменение текстовых и иных элементов разметки

Поля класса:

Методы класса:

setDisabled(element: HTMLElement, state: boolean) - отключение эелемента разметки\
_setText(element: HTMLElement, value: unknown) - изменение текстового содержания элемента\
toggleClass(element: HTMLElement, className: string, force?: boolean)\
_setImage(element: HTMLImageElement, src: string, alt?: string) - добавление/удаление класса


### Класс Modal

отвечает за отображение модальных окон. Наследует Component

Поля класса: 

HTML элемент кнопки закрытия окна и контейнер с разметкой внутри модального окна

Методы класса:

open() - открывает модальное окно\
close() - закрывает модальное окно\
render(data: IModalData): HTMLElement - вовзращает корневой элемент при изменении

### Класс Basket

Отображение элементов корзины в соответсвующем модальном окне списка покупок и суммы покупок. Наследует Component и его методы

Поля класса: элементы разметки окна корзины

### Класс Form

Отображение элементов форма оформление товаров в соответсвующем модальном окне. Наследует Component  и его методы

Поля класса: элементы разметки окна формы оформления заказа

Методы класса:

displayerrors() - управляет отображением текста ошибок\
setvalidation() - меняет разметку кнопок и других элементов в зависимости от валидации формы

### Класс Success 

Отображение разметки и суммы списания в окне успешного оформления товаров. Наследует Component  и его методы

Поля класса: элементы разметки окна успешного заказа


### Класс Card

Отображение разметки карточки товара на странице  и его методы

Поля класса: элементы разметки карточки



### Класс ProductDetail

отображение разметки описания продукта в модальном окне  и его методы

Поля класса: элементы окна товара



## Компоненты Презентера

Приложение является одностраничным сайтом - достаточного одного презентера, который будет размещен в основном скрипте index.ts

## Типы данных

### интерфейс товара
```
interface IShopItem {
    id: string; //id товара
    description: string; //подробное описание товара
    image: string; //ссылка на изображение товара
    title: string; // название товара
    category: string; // категория товара
    price: number | null;; // цена товара
}
```
### интерфейс заказа
```
interface IOrderForm {
    payment: 'online'| 'onDelivery'; //метод олплаты либо онлайн либо при получении
    deliveryAdress: string; // адрес доставки
    mail: string; // почта
    phone: string; // телефон

}
```
## Процессы

Событийно-ориентированный подход

1. Открыть/Закрыть модальное окно товара
2. Добавить 1 единицу товара в корзину
3. Убрать 1 единицу товара из корзины
4. Открыть/Закрыть модальное окно корзины
5. Убрать товар из корзины
6. Перейти к оформлению заказа (Открытие модального окна оформления заказа)
7. Выбор способа оплаты и указание адреса
8. Указание контактных данных 
9. Оформление заказа и получение уведомления о списании средств
